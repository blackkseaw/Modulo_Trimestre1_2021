CREATE DATABASE BIBLIOTECA;
USE BIBLIOTECA;
CREATE TABLE USUARIO (
        MATRICULA INT NOT NULL AUTO_INCREMENT,
        PRIMARY KEY(MATRICULA),
        NOME VARCHAR(100),
        ENDERECO VARCHAR(100),
        EMAIL VARCHAR(100)
);

CREATE TABLE LIVRO (
        CODIGO INT NOT NULL AUTO_INCREMENT,
    MATRICULA INT,
    FOREIGN KEY (MATRICULA) REFERENCES USUARIO (MATRICULA),
        PRIMARY KEY(CODIGO),
        TITULO VARCHAR(100),
        EDICAO VARCHAR(100),
        DATA_EMPRESTIMO DATE,
        DATA_DEVOLUCAO DATE,
        DATA_RESERVA DATE
);

CREATE TABLE RESERVAR (
    CODIGO_LIVRO INT NOT NULL,
    MATRICULA INT NOT NULL,
    PRIMARY KEY (CODIGO, MATRICULA),
    FOREIGN KEY (CODIGO) REFERENCES ENTIDADE_A (CODIGO),
    FOREIGN KEY (MATRICULA) REFERENCES ENTIDADE_B (MATRICULA)
);

CREATE TABLE AUTOR (
        CODIGO INT NOT NULL AUTO_INCREMENT,
        PRIMARY KEY(CODIGO),
        NOME VARCHAR(100),
        NACIONALIDADE VARCHAR(100),
        SITE VARCHAR(100),
        EMAIL VARCHAR(100)
);

CREATE TABLE ASSUNTO (
        CODIGO INT NOT NULL AUTO_INCREMENT,
        PRIMARY KEY(CODIGO),
        NOME VARCHAR(100)
);

CREATE TABLE ESCREVER (
    CODIGO_AUTOR INT NOT NULL,
    CODIGO_ASSUNTO INT NOT NULL,
    PRIMARY KEY (CODIGO_AUTOR, CODIGO_ASSUNTO),
    FOREIGN KEY (CODIGO_AUTOR) REFERENCES AUTOR (CODIGO_AUTOR),
    FOREIGN KEY (CODIGO_ASSUNTO) REFERENCES ASSUNTO (CODIGO_ASSUNTO)
);

CREATE TABLE CLASSIFICAR (
    CODIGO_LIVRO INT NOT NULL,
    CODIGO_ASSUNTO INT NOT NULL,
    PRIMARY KEY (CODIGO_LIVRO, CODIGO_ASSUNTO),
    FOREIGN KEY (CODIGO_LIVRO) REFERENCES LIVRO (CODIGO_LIVRO),
    FOREIGN KEY (CODIGO_ASSUNTO) REFERENCES ASSUNTO (CODIGO_ASSUNTO)
)